{
  "comments": [
    {
      "key": {
        "uuid": "30f4a3d0_6f163169",
        "filename": "gerrit-buck-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-09-17T02:57:42Z",
      "side": 1,
      "message": "why copy it?",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 2
      },
      "revId": "fd3ba802c139712dec5102ddd5d40ebff01e7dce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "30bf43e0_173694f8",
        "filename": "gerrit-buck-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-09-17T04:33:28Z",
      "side": 1,
      "message": "To have more nicer artifact name: gerrit.war?",
      "parentUuid": "30f4a3d0_6f163169",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 2
      },
      "revId": "fd3ba802c139712dec5102ddd5d40ebff01e7dce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90e54f1e_f24a0870",
        "filename": "gerrit-buck-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-09-17T05:34:55Z",
      "side": 1,
      "message": "I meant why copy it rather than renaming it?  By copying it we end up with two war files with the same content.",
      "parentUuid": "30bf43e0_173694f8",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 2
      },
      "revId": "fd3ba802c139712dec5102ddd5d40ebff01e7dce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "30bf43e0_77883064",
        "filename": "gerrit-buck-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-09-17T05:39:27Z",
      "side": 1,
      "message": "Because Buck sucks on file removal:\n\n  $ buck build gerrit\n  $ rm buck-out/gen/gerrit.war\n  $ buck build gerrit\n  $ ls buck-out/gen/gerrit.war \n  ls: cannot access buck-out/gen/gerrit.war: No such file or directory",
      "parentUuid": "90e54f1e_f24a0870",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 2
      },
      "revId": "fd3ba802c139712dec5102ddd5d40ebff01e7dce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90e54f1e_b2448063",
        "filename": "gerrit-buck-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-09-17T05:42:25Z",
      "side": 1,
      "message": "OK, but the first line of this script is `rm -Rf buck-out`.",
      "parentUuid": "30bf43e0_77883064",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 2
      },
      "revId": "fd3ba802c139712dec5102ddd5d40ebff01e7dce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "30bf43e0_3792b892",
        "filename": "gerrit-buck-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-09-17T05:55:09Z",
      "side": 1,
      "message": "... True, but note that on current master the cache is located in different directory: ~/.gerritcodereview/buck-cache/cache. See .buckconfig\n\n  [cache]\n    mode \u003d dir\n    dir \u003d ~/.gerritcodereview/buck-cache/cache\n\nSo to be 100% sure, that there is no staled cache related problem we could better wipe it out:\n\n  rm -Rf ~/.gerritcodereview/buck-cache/cache",
      "parentUuid": "90e54f1e_b2448063",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 2
      },
      "revId": "fd3ba802c139712dec5102ddd5d40ebff01e7dce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae0839ac_88d71753",
        "filename": "gerrit-buck-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2015-01-09T08:03:33Z",
      "side": 1,
      "message": "Actually it would be better to wipe out completely the ~/.gerritcodereview for two reasons:\na) It is better to make a build without previous state\nb) Disk space :-)",
      "parentUuid": "30bf43e0_3792b892",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 2
      },
      "revId": "fd3ba802c139712dec5102ddd5d40ebff01e7dce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ee36920_4c013f2e",
        "filename": "gerrit-buck-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-01-09T08:07:13Z",
      "side": 1,
      "message": "\u003e wipe out completely the ~/.gerritcodereview\n\nIs it possible for builds to run concurrently?  If so would be better to specify the cache directory per build rather than using the Jenkins user\u0027s home.\n\nAlso we probably don\u0027t want to wipe out the whole folder, only the buck build cache.  Wiping it out completely will mean it has to re-download the dependency jar files every time.",
      "parentUuid": "ae0839ac_88d71753",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 2
      },
      "revId": "fd3ba802c139712dec5102ddd5d40ebff01e7dce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae0839ac_48da3f7c",
        "filename": "gerrit-buck-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2015-01-09T08:13:34Z",
      "side": 1,
      "message": "In theory yes, in practice not really: the build itself takes a lot of resources and the only possibility to build concurrently would be using different slaves which would use anyway separate ~/.gerritcodereview directories.\n\nWith regards to dependency downloads, it is a good practice to not rely on them as many things may happen:\n- Download source URL becomes unavailable (if we depend by mistake from a temporary build)\n- Download redirected to unsafe SSL connection\n\nBy downloading again everything, we take more time and more bandwidth *BUT* we actually simulate the experience of a new Gerrit users that tries to clone and build from the first time: if we brake something of *that* experience we will notice from the CI build.\n\nPossibly maybe wiping out cache before the build and *everything* once a week?",
      "parentUuid": "2ee36920_4c013f2e",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 2
      },
      "revId": "fd3ba802c139712dec5102ddd5d40ebff01e7dce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee0eb1b4_2ae7ff3f",
        "filename": "gerrit-buck-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-01-09T08:22:39Z",
      "side": 1,
      "message": "| Possibly maybe wiping out cache before the build and *everything* once a week?\n\nCan\u0027t we just make assumption that Buck and its cache mechanism works as expected? You also don\u0027t reinstall your operation system, JDK, ... weekly, don\u0027t you?",
      "parentUuid": "ae0839ac_48da3f7c",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 2
      },
      "revId": "fd3ba802c139712dec5102ddd5d40ebff01e7dce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4edc1d30_bdea7fae",
        "filename": "gerrit-buck-template.yaml",
        "patchSetId": 1
      },
      "lineNbr": 6,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-01-09T03:05:28Z",
      "side": 1,
      "message": "-1 is the default, so doesn\u0027t need to be specified.",
      "range": {
        "startLine": 6,
        "startChar": 6,
        "endLine": 6,
        "endChar": 20
      },
      "revId": "fd3ba802c139712dec5102ddd5d40ebff01e7dce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6edf2124_7e2711a2",
        "filename": "gerrit-buck-template.yaml",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-01-09T03:05:28Z",
      "side": 1,
      "message": "-1 is the default, so doesn\u0027t need to be specified.",
      "range": {
        "startLine": 8,
        "startChar": 6,
        "endLine": 8,
        "endChar": 28
      },
      "revId": "fd3ba802c139712dec5102ddd5d40ebff01e7dce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6edf2124_5e225593",
        "filename": "gerrit-buck-template.yaml",
        "patchSetId": 1
      },
      "lineNbr": 39,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-01-09T03:05:28Z",
      "side": 1,
      "message": "There is no more development on stable-2.8, so that can be removed.\n\nAfter creating stable-2.11 I don\u0027t think we\u0027ll want to maintain stable-2.9 any more. I don\u0027t intend to make any more 2.9.x releases unless something critical comes up.",
      "range": {
        "startLine": 38,
        "startChar": 0,
        "endLine": 39,
        "endChar": 18
      },
      "revId": "fd3ba802c139712dec5102ddd5d40ebff01e7dce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}