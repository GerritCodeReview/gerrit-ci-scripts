{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b586b182_05ec97f7",
        "filename": "jenkins/gatlingTestPipeline.groovy",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2021-03-10T08:11:22Z",
      "side": 1,
      "message": "but how it\u0027s going to work? We always should have username/password populated by the jenkins job. Empty value will cause job failure anyway",
      "range": {
        "startLine": 31,
        "startChar": 46,
        "endLine": 31,
        "endChar": 62
      },
      "revId": "ed45c6bae1cecae200815281c9168ccdc5a23ef3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58e741ef_60d531e4",
        "filename": "jenkins/gatlingTestPipeline.groovy",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-03-10T08:24:31Z",
      "side": 1,
      "message": "If the value is empty, then the vault username and password will be used.\nSee L135 and L136.",
      "parentUuid": "b586b182_05ec97f7",
      "range": {
        "startLine": 31,
        "startChar": 46,
        "endLine": 31,
        "endChar": 62
      },
      "revId": "ed45c6bae1cecae200815281c9168ccdc5a23ef3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f5a8809e_7268d1e0",
        "filename": "jenkins/gatlingTestPipeline.groovy",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2021-03-10T08:49:20Z",
      "side": 1,
      "message": "So why we need to default it to empty string? if it\u0027s not provided by param or vault jenkins job should fail",
      "parentUuid": "58e741ef_60d531e4",
      "range": {
        "startLine": 31,
        "startChar": 46,
        "endLine": 31,
        "endChar": 62
      },
      "revId": "ed45c6bae1cecae200815281c9168ccdc5a23ef3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a30bbba_d2b9b773",
        "filename": "jenkins/gatlingTestPipeline.groovy",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-03-10T10:21:21Z",
      "side": 1,
      "message": "If username and password are NOT provided by param, the Jenkins job will always use the vault one, which cannot be empty, as we configured directly on the jenkins node (if for some reason, that was misconfigured, then yes, the job will fail)\n\nDefaulting to empty string, rather than not setting the default at all, solves the problem stated in the ticket:\n\n```\nIllegalArgumentException: Null value not allowed as an environment\nvariable: GIT_HTTP_USERNAME\n```\n\nParams are loaded as environment variables and, not defaulting the to empty string causes the exception above, which is related to the GIT_HTTP_USERNAME parameter, not to the vault one.\n\nHope it makes sense",
      "parentUuid": "f5a8809e_7268d1e0",
      "range": {
        "startLine": 31,
        "startChar": 46,
        "endLine": 31,
        "endChar": 62
      },
      "revId": "ed45c6bae1cecae200815281c9168ccdc5a23ef3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "311e3b80_f00c39a7",
        "filename": "jenkins/gatlingTestPipeline.groovy",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2021-03-10T10:43:20Z",
      "side": 1,
      "message": "But what happened that this job starts failing with this exception? Build was working fine for some time",
      "parentUuid": "7a30bbba_d2b9b773",
      "range": {
        "startLine": 31,
        "startChar": 46,
        "endLine": 31,
        "endChar": 62
      },
      "revId": "ed45c6bae1cecae200815281c9168ccdc5a23ef3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f796b0b_5bfc4c87",
        "filename": "jenkins/gatlingTestPipeline.groovy",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-03-10T10:54:16Z",
      "side": 1,
      "message": "As far as I understand, when it was run *manually* (i.e. build with parameters), it was working (possibly the UI was defaulting to empty string already?), but when it was triggered by the timer these values were being set as NULL.\n\nThese two parameters (GIT_HTTP_USERNAME, GIT_HTTP_PASSWORD) are the only ones without default, which I think is what\u0027s causing the issue.\n\nWe quickly debug this[1] with @luca and came to the conclusion that parameters with no defaults when loaded by Jenkins might be causing the issue.\n\nDo you think there\u0027s any side effect/risk in defaulting these parameters to empty string rather than null?\n\n[1]https://gerrit-ci.gerritforge.com/job/gatling-gerrit-test/219/console",
      "parentUuid": "311e3b80_f00c39a7",
      "range": {
        "startLine": 31,
        "startChar": 46,
        "endLine": 31,
        "endChar": 62
      },
      "revId": "ed45c6bae1cecae200815281c9168ccdc5a23ef3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f0e78b8f_71956b6b",
        "filename": "jenkins/gatlingTestPipeline.groovy",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2021-03-10T11:10:43Z",
      "side": 1,
      "message": "But his job was triggered by jenkins for some time and it was green. Anyway I just wanted to understand why we are hit by this issue now.\nThe only side effect I can imagine is that the job will fail later with gatling test failure. It\u0027s not a big deal.",
      "parentUuid": "0f796b0b_5bfc4c87",
      "range": {
        "startLine": 31,
        "startChar": 46,
        "endLine": 31,
        "endChar": 62
      },
      "revId": "ed45c6bae1cecae200815281c9168ccdc5a23ef3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}