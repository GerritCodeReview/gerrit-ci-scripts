{
  "comments": [
    {
      "key": {
        "uuid": "f92493c6_240e0667",
        "filename": "jenkins/gerrit-bazel-build-plugin-branch.sh",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2019-12-10T15:37:25Z",
      "side": 1,
      "message": "We fetch gerrit in the build script here and not using the Jenkins SCM, so is this required?",
      "revId": "24bbf1e00092e894df71f5d80ed8e802fef8bb24",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8e8d0e9d_74ce9ba8",
        "filename": "jenkins/gerrit-bazel-build-plugin-branch.sh",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-12-12T12:01:09Z",
      "side": 1,
      "message": "Yes, we only need the tags from the \u0027origin\u0027 because they influence the value returned by \u0027git describe\u0027 laster on in the versioning.\n\nPreviously, we were using the Jenkins SCM pre-defined tags fetching which was getting the ones form \u0027gerrit\u0027 also, potentially conflicting with the ones from the plugin.",
      "parentUuid": "f92493c6_240e0667",
      "revId": "24bbf1e00092e894df71f5d80ed8e802fef8bb24",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d26f6478_5d598d82",
        "filename": "jenkins/gerrit-bazel-plugin-template.yaml",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2019-12-10T15:37:25Z",
      "side": 1,
      "message": "Is this needed in this case? Here the Jenkins SCM plugin does not fetch Gerrit. This is done in the build script.",
      "revId": "24bbf1e00092e894df71f5d80ed8e802fef8bb24",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "239219c2_feac37e0",
        "filename": "jenkins/gerrit-bazel-plugin-template.yaml",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-12-12T12:01:09Z",
      "side": 1,
      "message": "It is needed, because the default is \u0027false\u0027 which means \"fetch tags\".\nWe do not want Jenkins to fetch all the tags for us, but instead having the build script to fetch only the ones associated with the plugin.",
      "parentUuid": "d26f6478_5d598d82",
      "revId": "24bbf1e00092e894df71f5d80ed8e802fef8bb24",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "20e095fe_e04888bd",
        "filename": "jenkins/gerrit-bazel-plugin-template.yaml",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2019-12-12T14:29:50Z",
      "side": 1,
      "message": "Yes, I got that, but here Jenkins will only clone the plugin and not Gerrit:\n\n  scm:\n      - git:\n          remotes:\n            - origin:\n                url: https://gerrit.googlesource.com/plugins/{name}\n          branches:\n            - \u0027*/{branch}\u0027\n          skip-tag: true\n\nGerrit is fetched manually in a shell script during the build. So Jenkins should only fetch tags from the plugin here, since the Jenkins SCM plugin does not know anything about Gerrit being fetched. Thus, I think we should only need that for the jobs, where we build the a plugin branch against only a single Gerrit branch, where we let the Jenkins SCM fetch both repositories.",
      "parentUuid": "239219c2_feac37e0",
      "revId": "24bbf1e00092e894df71f5d80ed8e802fef8bb24",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "efe0bb86_6673650c",
        "filename": "jenkins/gerrit-bazel-plugin-template.yaml",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-12-12T14:53:14Z",
      "side": 1,
      "message": "Unrelated to this change, but a related question is with how to ask jenkins to fetch recursively? I filed this issue: [1]. In it-* template only gerrit is fetched, but not jgit moduels, that is required to build its-* plugins. Any idea?\n\n* [1] https://bugs.chromium.org/p/gerrit/issues/detail?id\u003d12064",
      "parentUuid": "20e095fe_e04888bd",
      "revId": "24bbf1e00092e894df71f5d80ed8e802fef8bb24",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c777fd03_3f3b2da9",
        "filename": "jenkins/gerrit-bazel-plugin-template.yaml",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-12-12T14:53:14Z",
      "side": 1,
      "message": "According to the documentation it is included in the extension: [1]. Are those extension available? I\u0027m asking because I would like to fix CI build for it-* plugins, and for that I need to fetch submodules (actually only JGit), e.g.:\n\n  scm:\n      - git:\n          remotes:\n            - origin:\n                url: https://gerrit.googlesource.com/gerrit\n                submodules:\n                  recursive: true\n            \n* [1] https://docs.openstack.org/infra/jenkins-job-builder/scm.html?highlight\u003dwipe#scm.git\n* [2] https://bugs.chromium.org/p/gerrit/issues/detail?id\u003d1206",
      "range": {
        "startLine": 68,
        "startChar": 10,
        "endLine": 68,
        "endChar": 33
      },
      "revId": "24bbf1e00092e894df71f5d80ed8e802fef8bb24",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "df1ad479_dc406b5b",
        "filename": "jenkins/gerrit-bazel-plugin-template.yaml",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-12-27T20:51:54Z",
      "side": 1,
      "message": "@Thomas: you are right, I was referring to L43, but here you are right, isn\u0027t necessarily needed.",
      "parentUuid": "efe0bb86_6673650c",
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "24bbf1e00092e894df71f5d80ed8e802fef8bb24",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "182bd528_fc42f625",
        "filename": "jenkins/gerrit-bazel-plugin-template.yaml",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-12-27T20:51:54Z",
      "side": 1,
      "message": "You can have Jenkins to checkout the branch and recurse submodules. However, in the plugin template, we do the checkout manually in the shell script because a more ad-hoc checkout is needed rather than the default one done by Jenkins.",
      "parentUuid": "c777fd03_3f3b2da9",
      "range": {
        "startLine": 68,
        "startChar": 10,
        "endLine": 68,
        "endChar": 33
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "24bbf1e00092e894df71f5d80ed8e802fef8bb24",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c077b055_0464540f",
        "filename": "jenkins/gerrit-bazel-plugin-template.yaml",
        "patchSetId": 3
      },
      "lineNbr": 93,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2019-12-10T15:37:25Z",
      "side": 1,
      "message": "See my previous comment",
      "revId": "24bbf1e00092e894df71f5d80ed8e802fef8bb24",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e6772184_3ca0c722",
        "filename": "jenkins/gerrit-bazel-plugin-template.yaml",
        "patchSetId": 3
      },
      "lineNbr": 93,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-12-12T12:01:09Z",
      "side": 1,
      "message": "Same answer as before.",
      "parentUuid": "c077b055_0464540f",
      "revId": "24bbf1e00092e894df71f5d80ed8e802fef8bb24",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a0662a5d_e377d4dc",
        "filename": "jenkins/gerrit-bazel-plugin-template.yaml",
        "patchSetId": 3
      },
      "lineNbr": 93,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-12-27T20:51:54Z",
      "side": 1,
      "message": "True, here isn\u0027t needed.",
      "parentUuid": "e6772184_3ca0c722",
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "24bbf1e00092e894df71f5d80ed8e802fef8bb24",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}