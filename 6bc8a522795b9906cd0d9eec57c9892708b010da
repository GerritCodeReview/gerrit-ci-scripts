{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "fd26019d_2185b5c7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2020-11-27T14:49:31Z",
      "side": 1,
      "message": "We do need this, for now, until we have decoupled the Docker-based tests from everything else :-(",
      "revId": "6bc8a522795b9906cd0d9eec57c9892708b010da",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "46748fb2_e34c11c7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2020-11-27T15:02:52Z",
      "side": 1,
      "message": "Can we reduce amount of ES docker based integration tests? My point is: none is using the ES setup yet in production (correct me if I wrong). Nevertheless we are spending quite some time on each and every test to verify different ES versions. What if we only support one single ES version and discontinue all other versions?",
      "revId": "6bc8a522795b9906cd0d9eec57c9892708b010da",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "081283bd_e5457918",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2020-11-27T16:26:08Z",
      "side": 1,
      "message": "\u003e Can we reduce amount of ES docker based integration tests? My point is: none is using the ES setup yet in production (correct me if I wrong).\n\nI believe Marco did a survey on that. Also, Alibaba answered that they are using it in production.\n\n\u003e Nevertheless we are spending quite some time on each and every test to verify different ES versions. What if we only support one single ES version and discontinue all other versions?\n\nThat\u0027s more a question for @Marco.\n\nI believe there is value in checking ES because we had in the past changes to the Gerrit index code that was breaking when executed on ES. We should detect those type of breakages before they actually are merged.\n\nI am a bit surprised that Bazel doesn\u0027t cache them though, as they should not be run if the code doesn\u0027t change. Is there anything in the output of the Bazel build that can give you a clue on why those are still run even if they aren\u0027t needed?",
      "parentUuid": "46748fb2_e34c11c7",
      "revId": "6bc8a522795b9906cd0d9eec57c9892708b010da",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5255aad5_17877097",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2020-11-27T16:45:42Z",
      "side": 1,
      "message": "Feedback herein.",
      "revId": "6bc8a522795b9906cd0d9eec57c9892708b010da",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bd9d1ad0_9f66ddaf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2020-11-27T16:45:42Z",
      "side": 1,
      "message": "\u003e \u003e Can we reduce amount of ES docker based integration tests? My point is: none is using the ES setup yet in production (correct me if I wrong).\n\u003e \n\u003e I believe Marco did a survey on that. Also, Alibaba answered that they are using it in production.\n\nThat is also what I recall, based on that past survey. The latter didn\u0027t reveal more than one active user of ES. Maybe some more added themselves since that survey though.\n\nEricsson (yours truly) keeps maintaining ES in core as we were the ones co-introducing its support originally, along with you \u0026co. We might use it eventually (2021?) -but not by this ending 2020 definitely.\n\n\u003e \u003e Nevertheless we are spending quite some time on each and every test to verify different ES versions. What if we only support one single ES version and discontinue all other versions?\n\u003e \n\u003e That\u0027s more a question for @Marco.\n\u003e \n\u003e I believe there is value in checking ES because we had in the past changes to the Gerrit index code that was breaking when executed on ES. We should detect those type of breakages before they actually are merged.\n\nYes; exactly. Note that V6 has been fully EOL\u0027ed through eol 6.8.x on 2020-11-20 [1]. I at least didn\u0027t have the time yet to update Gerrit accordingly, as we usually do already for eol ES versions.\n\n[1] https://www.elastic.co/support/eol\n\nDoing that would help this change\u0027s cause I think, as far as we don\u0027t have Gerrit users relying on V6 in their deployments. -Because removing V6 completely would mean only supporting V7, along with soon potentially supporting V8 (or not, or not yet). Now ES still has value in Gerrit overall I believe.",
      "parentUuid": "081283bd_e5457918",
      "revId": "6bc8a522795b9906cd0d9eec57c9892708b010da",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9c40e5bf_b22e8004",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2020-11-27T17:54:24Z",
      "side": 1,
      "message": "Thanks for the feedback. Should we announce the deprecation of support for ES 6 ASAP? We could communicate it now and add it in release notes 3.3?",
      "parentUuid": "bd9d1ad0_9f66ddaf",
      "revId": "6bc8a522795b9906cd0d9eec57c9892708b010da",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c18f5129_323d6aa4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2020-11-27T18:15:47Z",
      "side": 1,
      "message": "We could, but I think only (jointly) after pushing changes to remove V6 entirely and properly from Gerrit first. I don\u0027t have that time myself as we speak unfortunately, so maybe later if me -or I can review if somebody else does so.\n\nI propose to wait for after 3.3 (next Monday) so we don\u0027t rush that whole V6 removal. Especially knowing the starting week-end with unavailabilities from our ends, at least for me this time around.",
      "parentUuid": "9c40e5bf_b22e8004",
      "revId": "6bc8a522795b9906cd0d9eec57c9892708b010da",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0c8b4764_b6af5713",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2020-12-06T22:10:34Z",
      "side": 1,
      "message": "-Done; https://groups.google.com/g/repo-discuss/c/cAGb0rMm2P8.",
      "parentUuid": "c18f5129_323d6aa4",
      "revId": "6bc8a522795b9906cd0d9eec57c9892708b010da",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}